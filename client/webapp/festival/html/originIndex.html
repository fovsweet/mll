<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1, maximum-scale=1"> 		
		<meta name="format-detection" content="telephone=no" />
		<title>拜年有礼 美家惊喜</title>
		<link rel="stylesheet" href="../../common/css/reset.css" />
		<link rel="stylesheet" href="../css/lay-mobile.css" />
		<link rel="stylesheet" href="../css/origin.css" />
	</head>
	<body>
		<div class="wrap" id="wrap">
			<span class="red-pack" id="redpack01">
				<img src="../images/redpack3.png" />
			</span>
			<span class="red-pack" id="redpack02">
				<img src="../images/redpack3.png" />
			</span>
			<span class="red-pack" id="redpack03">
				<img src="../images/redpack1.png" />
			</span>
			<span class="red-pack" id="redpack04">
				<img src="../images/redpack2.png" />
			</span>
			<!--<img src="../images/origin_index_bg.png" />-->
			<div id="wrapfooter" class="wrap-footer">
				<div class="friend-btn">
					召集好友跪拜我
				</div>
				<div class="festival-word">
					已有122,082人参与拜年，拜年人气送大礼
				</div>
				<div class="festival-bar">
					<span class="festival-btn" id="rankLists" data-role="checkList">拜年人气榜</span>
					<span class="festival-btn">活动详情</span>
				</div>
			</div>
		</div>
		<!--------------分享蒙层------------------------>
		<div class="share-mask">
			<div class="share-mask-bg"></div>
			<div class="share-mask-word">
				请点击右上角<br />
				分享给指定好友或分享到朋友圈
			</div>
		</div>
	</body>
	<script src="../js/se-respone-width.js"></script>
	<script src="../js/zepto.min.js"></script>
	<script src="../js/lay-mobile.js"></script>
	<script type="text/javascript">
		var oimg = ['origin_footer_bg.png','origin_index_bg.png','redpack1.png','redpack2.png','redpack3.png'];
		loadImg(oimg,'../images/',function(){
			layer.open({type: 2});
		},function(){
			setTimeout(function(){$('#layermbox3').remove();$('.wrap').addClass('wrap-animate');},500);			
			var ow = document.getElementById('wrap');
			var owf =document.getElementById('wrapfooter');
			ow.addEventListener('webkitAnimationEnd',function(){
				$('#wrapfooter').addClass('wrap-footer-animate');
				owf.addEventListener('webkitAnimationEnd',function(){
					$('#redpack01').addClass('redpack-01');
					$('#redpack02').addClass('redpack-02');
					$('#redpack03').addClass('redpack-03');
					$('#redpack04').addClass('redpack-04');
				})
			},false)
		});
		
		!(function($){
			$('.friend-btn').on('tap',function(){
				$('.share-mask').css({'display':'-webkit-box','-webkit-box-orient': 'vertical','-webkit-box-pack':'center','-webkit-box-align':'center'}).find('.share-mask-bg').css('margin-top','-3rem');
				$(".share-mask").css('z-index','1').animate({opacity:0.9,},200,'ease-out')
			});
			
			$('.share-mask').on('tap',function(){
				maskHide();
			});
			
			$('#rankLists').on('tap',function(){
				layer.open({
		            type: 1,
		            anim: true,
		            shadeClose:false,
		            content: '<div class="charts-modal">'+
								'<div class="charts-header">'+
									'<img src="../images/chartImg.png" alt="" />'+
								'</div>'+
								'<div class="charts-body">'+
									'<div class="charts-content">'+
										'<div class="chart-number">当前排名：(只显示前10名)</div>'+
										'<table class="chart-table">'+
											'<thead>'+
												'<tr>'+
													'<th>排行</th>'+
													'<th>头像</th>'+
													'<th>昵称</th>'+
													'<th>人气</th>'+
												'</tr>'+
											'</thead>'+
											'<tbody>'+
												'<tr>'+
													'<td><span class="chart-icon first-icon">1</span></td>'+
													'<td><img src="../images/head.jpg" alt="" /></td>'+
													'<td>dadadad</td>'+
													'<td>34</td>'+
												'</tr>'+
												'<tr>'+
													'<td><span class="chart-icon second-icon">2</span></td>'+
													'<td><img src="../images/head.jpg" alt="" /></td>'+
													'<td>dadadad</td>'+
													'<td>34</td>'+
												'</tr>'+
												'<tr>'+
													'<td><span class="chart-icon third-icon">3</span></td>'+
													'<td><img src="../images/head.jpg" alt="" /></td>'+
													'<td>dadadad</td>'+
													'<td>34</td>'+
												'</tr>'+
												'<tr>'+
													'<td><span class="chart-num-icon">4</span></td>'+
													'<td><img src="../images/head.jpg" alt="" /></td>'+
													'<td>dadadad</td>'+
													'<td>34</td>'+
												'</tr>'+
												'<tr>'+
													'<td><span class="chart-num-icon">5</span></td>'+
													'<td><img src="../images/head.jpg" alt="" /></td>'+
													'<td>dadadad</td>'+
													'<td>34</td>'+
												'</tr>'+
											'</tbody>'+
										'</table>'+
									'</div>'+
								'</div>'+
								'<span class="modal-close">'+
									'<span class="close-icon"></span>'+
								'</span>'+
							'</div>'
		        });
		        $('.modal-close').on('tap',function(){
					$('.layermbox').innerHTML = '';
					$('.layermbox').remove();
				})
			})
			
		})(Zepto)
		
		function maskHide(){
				$('.share-mask').animate({opacity:0,},500,'ease-in').css('z-index','-1');
		}
		function loadImg(oimg,srcs,tipbback,callback){
			var imgNum =0;
			var oImg = new Image();
			loader();
			function loader(){
				oImg.src =srcs+oimg[imgNum];
				oImg.onload = function(){
					imgNum ++;
					console.log(imgNum);
					if(imgNum<oimg.length){
						loader();
						tipbback&&tipbback();
					}
					else{
						callback&&callback();
					}
				}
			}
		}
	</script>
</html>
